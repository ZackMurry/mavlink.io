<!DOCTYPE HTML><html lang="ko"><head><meta charset="UTF-8"><meta content="text/html; charset=utf-8"http-equiv="Content-Type"><title>Component Information Protocol (WIP) · MAVLink Developer Guide</title><meta content="IE=edge"http-equiv="X-UA-Compatible"/><meta content=""name="description"><meta content="GitBook 3.2.3"name="generator"><link href="../../gitbook/style.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-anchors/plugin.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-page-toc-button/plugin.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-language-picker/plugin.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-richquotes/plugin.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-highlight/website.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-search/search.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-fontsettings/website.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-theme-api/theme-api.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-theme-dronecode/theme_styles.css"rel="stylesheet"><meta content="true"name="HandheldFriendly"/><meta content="width=device-width,initial-scale=1,user-scalable=no"name="viewport"><meta content="yes"name="apple-mobile-web-app-capable"><meta content="black"name="apple-mobile-web-app-status-bar-style"><link href="../../gitbook/images/apple-touch-icon-precomposed-152.png"rel="apple-touch-icon-precomposed"sizes="152x152"><link href="../../gitbook/images/favicon.ico"rel="shortcut icon"type="image/x-icon"><link href="../contributing/contributing.html"rel="next"/><link href="high_latency.html"rel="prev"/></head><body><div id="common_dronecode_menu"><div class="large_version common_menu_logo"><a href="https://mavlink.io/en/"><img alt="Dronecode logo (large)"src="../../assets/site/logo_mavlink_header.png"/></a></div><div class="small_version common_menu_logo"><a href="https://mavlink.io/en/"><img alt="Dronecode logo (small)"src="../../assets/site/logo_mavlink_header.png"/></a></div><div class="common_menu_options"><div class="common_dronecode_menu_item large_version"><a href="https://mavlink.io/en/messages/common.html">Messages</a></div><div class="common_dronecode_menu_item small_version"><a href="https://mavlink.io/en/messages/common.html">Messages</a></div><div class="common_dronecode_menu_item large_version"><a href="https://mavlink.io/en/about/faq.html">FAQ</a></div><div class="common_dronecode_menu_item small_version"><a href="https://mavlink.io/en/about/faq.html">FAQ</a></div><div class="common_dronecode_menu_item large_version"><a href="https://mavlink.io/en/about/implementations.html">Implementations</a></div><div class="common_dronecode_menu_item small_version"><a href="https://mavlink.io/en/about/implementations.html">Implementations</a></div><div class="common_dronecode_menu_item large_version"><a href="https://mavlink.io/en/mavgen_c/examples.html">Examples</a></div><div class="common_dronecode_menu_item small_version"><a href="https://mavlink.io/en/mavgen_c/examples.html">Examples</a></div><div class="common_dronecode_menu_item large_version"><a href="https://mavlink.io/en/about/support.html">Support</a></div><div class="common_dronecode_menu_item small_version"><a href="https://mavlink.io/en/about/support.html">Help</a></div></div></div><div class="book"><div class="book-summary"><div id="book-search-input"role="search"><input placeholder="검색어 입력"type="text"/></div><nav role="navigation"><ul class="summary"><li class="chapter"data-level="1.1"data-path="../"><a href="../">소개</a><ul class="articles"><li class="chapter"data-level="1.1.1"data-path="../about/overview.html"><a href="../about/overview.html">개요</a></li><li class="chapter"data-level="1.1.2"data-path="../about/faq.html"><a href="../about/faq.html">자주 묻는 질문</a></li><li class="chapter"data-level="1.1.3"data-path="../about/implementations.html"><a href="../about/implementations.html">구현</a></li></ul></li><li class="chapter"data-level="1.2"data-path="../getting_started/"><a href="../getting_started/">시작하기</a><ul class="articles"><li class="chapter"data-level="1.2.1"data-path="../getting_started/installation.html"><a href="../getting_started/installation.html">MAVLink 설치하기</a></li><li class="chapter"data-level="1.2.2"data-path="../getting_started/generate_libraries.html"><a href="../getting_started/generate_libraries.html">MAVLink 라이브러리 생성하기</a></li><li class="chapter"data-level="1.2.3"data-path="../getting_started/ros.html"><a href="../getting_started/ros.html">ROS용 소스 코드 파일 생성하기</a></li></ul></li><li class="chapter"data-level="1.3"data-path="../getting_started/use_libraries.html"><a href="../getting_started/use_libraries.html">MAVLink 라이브러리 사용법</a><ul class="articles"><li class="chapter"data-level="1.3.1"data-path="../mavgen_c/"><a href="../mavgen_c/">C (mavgen)</a><ul class="articles"><li class="chapter"data-level="1.3.1.1"data-path="../mavgen_c/message_signing_c.html"><a href="../mavgen_c/message_signing_c.html">메세지 서명</a></li><li class="chapter"data-level="1.3.1.2"data-path="../mavgen_c/examples.html"><a href="../mavgen_c/examples.html">예제</a><ul class="articles"><li class="chapter"data-level="1.3.1.2.1"data-path="../mavgen_c/example_c_uart.md"><span>UART 인터페이스 (C)</span></li><li class="chapter"data-level="1.3.1.2.2"data-path="../mavgen_c/example_c_udp.md"><span>UDP 예시 (C)</span></li></ul></li></ul></li><li class="chapter"data-level="1.3.2"data-path="../mavgen_python/"><a href="../mavgen_python/">Python (mavgen)</a></li></ul></li><li class="chapter"data-level="1.4"data-path="../guide/"><a href="../guide/">안내서</a><ul class="articles"><li class="chapter"data-level="1.4.1"data-path="../guide/mavlink_version.html"><a href="../guide/mavlink_version.html">MAVLink 버전</a></li><li class="chapter"data-level="1.4.2"data-path="../guide/mavlink_2.html"><a href="../guide/mavlink_2.html">MAVLink 2</a></li><li class="chapter"data-level="1.4.3"data-path="../guide/message_signing.html"><a href="../guide/message_signing.html">메세지 서명</a></li><li class="chapter"data-level="1.4.4"data-path="../guide/serialization.html"><a href="../guide/serialization.html">직렬화</a></li><li class="chapter"data-level="1.4.5"data-path="../guide/routing.html"><a href="../guide/routing.html">라우팅</a></li><li class="chapter"data-level="1.4.6"data-path="../guide/general_telemetry.html"><a href="../guide/general_telemetry.html">범용 텔레메트리</a></li><li class="chapter"data-level="1.4.7"data-path="../guide/offboard_control.html"><a href="../guide/offboard_control.html">보드 외부 요소 제어</a></li><li class="chapter"data-level="1.4.8"data-path="../file_formats/"><a href="../file_formats/">파일 형식</a></li><li class="chapter"data-level="1.4.9"data-path="../guide/uavcan_interaction.html"><a href="../guide/uavcan_interaction.html">UAVCAN 통신</a></li><li class="chapter"data-level="1.4.10"data-path="../guide/scripts.html"><a href="../guide/scripts.html">스크립트</a></li><li class="chapter"data-level="1.4.11"data-path="../guide/xml_schema.html"><a href="../guide/xml_schema.html">MAVLink XML 스키마</a></li><li class="chapter"data-level="1.4.12"data-path="../guide/define_xml_element.html"><a href="../guide/define_xml_element.html">XML 기수/메세지 정의</a></li><li class="chapter"data-level="1.4.13"data-path="../guide/crc.html"><a href="../guide/crc.html">MAVLink CRC</a></li><li class="chapter"data-level="1.4.14"data-path="../guide/wireshark.html"><a href="../guide/wireshark.html">Debugging with Wireshark</a></li><li class="chapter"data-level="1.4.15"data-path="../messages/"><a href="../messages/">Dialects</a><ul class="articles"><li class="chapter"data-level="1.4.15.1"data-path="../messages/ASLUAV.html"><a href="../messages/ASLUAV.html">ASLUAV.xml</a></li><li class="chapter"data-level="1.4.15.2"data-path="../messages/all.html"><a href="../messages/all.html">all.xml</a></li><li class="chapter"data-level="1.4.15.3"data-path="../messages/ardupilotmega.html"><a href="../messages/ardupilotmega.html">ardupilotmega.xml</a></li><li class="chapter"data-level="1.4.15.4"data-path="../messages/autoquad.html"><a href="../messages/autoquad.html">autoquad.xml</a></li><li class="chapter"data-level="1.4.15.5"data-path="../messages/development.html"><a href="../messages/development.html">development.xml</a></li><li class="chapter"data-level="1.4.15.6"data-path="../messages/icarous.html"><a href="../messages/icarous.html">icarous.xml</a></li><li class="chapter"data-level="1.4.15.7"data-path="../messages/matrixpilot.html"><a href="../messages/matrixpilot.html">matrixpilot.xml</a></li><li class="chapter"data-level="1.4.15.8"data-path="../messages/minimal.html"><a href="../messages/minimal.html">minimal.xml</a></li><li class="chapter"data-level="1.4.15.9"data-path="../messages/paparazzi.html"><a href="../messages/paparazzi.html">paparazzi.xml</a></li><li class="chapter"data-level="1.4.15.10"data-path="../messages/python_array_test.html"><a href="../messages/python_array_test.html">python_array_test.xml</a></li><li class="chapter"data-level="1.4.15.11"data-path="../messages/standard.html"><a href="../messages/standard.html">standard.xml</a></li><li class="chapter"data-level="1.4.15.12"data-path="../messages/test.html"><a href="../messages/test.html">test.xml</a></li><li class="chapter"data-level="1.4.15.13"data-path="../messages/uAvionix.html"><a href="../messages/uAvionix.html">uAvionix.xml</a></li><li class="chapter"data-level="1.4.15.14"data-path="../messages/ualberta.html"><a href="../messages/ualberta.html">ualberta.xml</a></li></ul></li></ul></li><li class="chapter"data-level="1.5"data-path="../messages/common.html"><a href="../messages/common.html">메세지 (공통)</a></li><li class="chapter"data-level="1.6"data-path="./"><a href="./">Microservices</a><ul class="articles"><li class="chapter"data-level="1.6.1"data-path="heartbeat.html"><a href="heartbeat.html">주기 신호/연결 프로토콜</a></li><li class="chapter"data-level="1.6.2"data-path="mission.html"><a href="mission.html">미션 프로토콜</a></li><li class="chapter"data-level="1.6.3"data-path="parameter.html"><a href="parameter.html">매개변수 프로토콜</a></li><li class="chapter"data-level="1.6.4"data-path="parameter_ext.html"><a href="parameter_ext.html">Extended Parameter Protocol</a></li><li class="chapter"data-level="1.6.5"data-path="command.html"><a href="command.html">Command Protocol</a></li><li class="chapter"data-level="1.6.6"data-path="camera.html"><a href="camera.html">Camera Protocol</a><ul class="articles"><li class="chapter"data-level="1.6.6.1"data-path="camera_def.html"><a href="camera_def.html">Camera Definition</a></li></ul></li><li class="chapter"data-level="1.6.7"data-path="gimbal_v2.html"><a href="gimbal_v2.html">Gimbal Protocol v2</a><ul class="articles"><li class="chapter"data-level="1.6.7.1"data-path="gimbal.html"><a href="gimbal.html">Gimbal Protocol v1 (superseded)</a></li></ul></li><li class="chapter"data-level="1.6.8"data-path="arm_authorization.html"><a href="arm_authorization.html">Arm Authorization Protocol</a></li><li class="chapter"data-level="1.6.9"data-path="image_transmission.html"><a href="image_transmission.html">Image Transmission Protocol</a></li><li class="chapter"data-level="1.6.10"data-path="ftp.html"><a href="ftp.html">File Transfer Protocol (FTP)</a></li><li class="chapter"data-level="1.6.11"data-path="landing_target.html"><a href="landing_target.html">Landing Target Protocol</a></li><li class="chapter"data-level="1.6.12"data-path="ping.html"><a href="ping.html">Ping Protocol</a></li><li class="chapter"data-level="1.6.13"data-path="trajectory.html"><a href="trajectory.html">Path Planning (Trajectory) Protocol</a></li><li class="chapter"data-level="1.6.14"data-path="battery.html"><a href="battery.html">Battery Protocol</a></li><li class="chapter"data-level="1.6.15"data-path="terrain.html"><a href="terrain.html">Terrain Protocol</a></li><li class="chapter"data-level="1.6.16"data-path="tunnel.html"><a href="tunnel.html">Tunnel Protocol</a></li><li class="chapter"data-level="1.6.17"data-path="opendroneid.html"><a href="opendroneid.html">Open Drone ID Protocol (WIP)</a></li><li class="chapter"data-level="1.6.18"data-path="high_latency.html"><a href="high_latency.html">High Latency Protocol</a></li><li class="chapter active"data-level="1.6.19"data-path="component_information.html"><a href="component_information.html">Component Information Protocol (WIP)</a></li></ul></li><li class="chapter"data-level="1.7"data-path="../contributing/contributing.html"><a href="../contributing/contributing.html">Contributing</a></li><li class="chapter"data-level="1.8"data-path="../about/support.html"><a href="../about/support.html">지원</a></li><li class="divider"></li><li><a href="https://www.gitbook.com"class="gitbook-link"target="blank">GitBook에 게시</a></li></ul></nav></div><div class="book-body"><div class="body-inner"><div class="book-header"role="navigation"><h1><i class="fa fa-circle-o-notch fa-spin"></i> <a href="..">Component Information Protocol (WIP)</a></h1></div><div class="page-wrapper"role="main"tabindex="-1"><div class="page-inner"><div id="book-search-results"><div class="search-noresults"><section class="markdown-section normal"><h1 id="component-information-protocol-wip"><a href="#component-information-protocol-wip"class="plugin-anchor"name="component-information-protocol-wip"><i class="fa fa-link"aria-hidden="true"></i></a>Component Information Protocol (WIP)</h1><blockquote class="alert clearfix alert-warning"><strong class="fa fa-2x fa-exclamation-triangle"></strong><p>This service is still marked as &quot;work in progress&quot;, and should not be relied upon in production.</p></blockquote><p>The <em>Component Information Protocol</em> is a MAVLink service for requesting information from (and about) MAVLink components. It is intended to provide autopilot- and version- independent feature discovery and configuration, allowing a GCS to configure its UI and/or a device without knowing anything about the connected system.</p><p>Information shared using this service may include:</p><ul><li>What types of component information are supported (by this component).</li><li>What MAVLink commands are supported (both in missions and in other modes).</li><li>Parameter metadata for parameters supported by the vehicle.</li><li>Metadata about events emitted by the system</li><li>Self-describing configuration UIs (i.e. similar to MAVLink camera configuration files).</li><li>Translations of other metadata.</li></ul><p>Component information is specified in <a href="#schema_files">approriately formatted JSON files</a> (which may be <a href="#file-compression"><strong>.xz</strong> compressed</a>). The component information protocol is used to request the location of the <a href="#COMP_METADATA_TYPE_GENERAL">general metadata file</a> file, which is then parsed to get the location of most other <a href="#schema_files">metadata files</a> supported by the component.</p><p>Information supplied by the service is assumed to be invariant after boot. There is no mechanism, for example, to provide an update if the set of supported parameters was to change after boot.</p><h2 id="messageenum-summary"><a href="#messageenum-summary"class="plugin-anchor"name="messageenum-summary"><i class="fa fa-link"aria-hidden="true"></i></a>Message/Enum Summary</h2><table><thead><tr><th>Message</th><th>Description</th></tr></thead><tbody><tr><td><a id="COMPONENT_INFORMATION"></a><a href="../messages/common.html#COMPONENT_INFORMATION">COMPONENT_INFORMATION</a></td><td>Message providing a download url and <a href="#metadata-caching-crc">CRC</a> for the <a href="#COMP_METADATA_TYPE_GENERAL">general metadata</a> component information file (and optionally the <a href="#COMP_METADATA_TYPE_PERIPHERALS">non-MAVLink peripherals metadata</a>). The message is requested using <a href="#MAV_CMD_REQUEST_MESSAGE">MAV_CMD_REQUEST_MESSAGE</a>.</td></tr><tr><td><a id="MAV_CMD_REQUEST_MESSAGE"></a><a href="../messages/common.html#MAV_CMD_REQUEST_MESSAGE">MAV_CMD_REQUEST_MESSAGE</a></td><td>Use this command to request that a component emit <a href="#COMPONENT_INFORMATION">COMPONENT_INFORMATION</a>. Use <code>param1=395</code> (the message id of <code>COMPONENT_INFORMATION</code>).</td></tr></tbody></table><table><thead><tr><th>Enum</th><th>Description</th></tr></thead><tbody><tr><td><a id="COMP_METADATA_TYPE"></a><a href="../messages/common.html#COMP_METADATA_TYPE">COMP_METADATA_TYPE</a></td><td>Types of component metadata supported by the protocol - e.g. general information, parameter metadata, supported commands, events, peripherals, etc. The type identifiers are used in the &quot;general&quot; metadata file to identify the sections that provide information about each supported type of metadata.</td></tr></tbody></table><h2 id="schema_files"><a href="#schema_files"class="plugin-anchor"name="schema_files"><i class="fa fa-link"aria-hidden="true"></i></a>Component Information File Format (Schema)</h2><p>Component information files are written in JSON and must conform to the schema definitions found in the folder <a href="https://github.com/mavlink/mavlink/tree/master/component_information"target="_blank">/component_information</a>. The component information file types and schema are (at time of writing):</p><table><thead><tr><th>Type</th><th>Type Id</th><th>Schema</th><th>Description</th></tr></thead><tbody><tr><td><a id="COMP_METADATA_TYPE_GENERAL"></a>General metadata</td><td><a href="../messages/common.html#COMP_METADATA_TYPE_GENERAL">COMP_METADATA_TYPE_GENERAL</a></td><td><a href="https://github.com/mavlink/mavlink/blob/master/component_information/general.schema.json"target="_blank">general.schema.json</a></td><td>General information about the component including hardware/firmware vendor version. This metadata includes information about all the other metadata types are supported by the component and where their metadata files are located. This metadata type must be supported if this protocol is supported and the file must be present on vehicle and delivered by MAVLink FTP. Note however that you never actually need to specify this type!</td></tr><tr><td><a id="COMP_METADATA_TYPE_PARAMETER"></a>Parameter metadata</td><td><a href="../messages/common.html#COMP_METADATA_TYPE_PARAMETER">COMP_METADATA_TYPE_PARAMETER</a></td><td><a href="https://github.com/mavlink/mavlink/blob/master/component_information/parameter.schema.json"target="_blank">parameter.schema.json</a></td><td>Information about parameters supported by the vehicle (on boot).</td></tr><tr><td><a id="COMP_METADATA_TYPE_COMMANDS"></a> Command protocol metadata</td><td><a href="../messages/common.html#COMP_METADATA_TYPE_COMMANDS">COMP_METADATA_TYPE_COMMANDS</a></td><td>TBD</td><td>Information about which commands and command paramters are supported in via the command protocol.</td></tr><tr><td><a id="COMP_METADATA_TYPE_PERIPHERALS"></a> Peripheral metadata</td><td><a href="../messages/common.html#COMP_METADATA_TYPE_PERIPHERALS">COMP_METADATA_TYPE_PERIPHERALS</a></td><td><a href="https://github.com/mavlink/mavlink/blob/master/component_information/peripherals.json"target="_blank">peripherals.json</a></td><td>Information about non-MAVLink peripherals connected to vehicle (on boot).</td></tr><tr><td><a id="COMP_METADATA_TYPE_EVENTS"></a> Event metadata</td><td><a href="../messages/common.html#COMP_METADATA_TYPE_EVENTS">COMP_METADATA_TYPE_EVENTS</a></td><td>TBD</td><td>Information about events interface support by the vehicle.</td></tr></tbody></table><p>All schema files are <em>versioned</em> using a <code>version</code> integer.</p><p>Schema versions are backwards compatible - i.e. a ground station that was able to populate its UI from a file based on an older schema should be able to do so from a newer version (albeit losing information provided by the newer format).</p><p>Generally this means that new versions may add fields but should not delete them, and also that a recipient can ignore fields that it does not understand.</p><p>The schema are currently a work in progress and can be modified as needed. Once accepted, they will be under change control (<em>managed</em> in a similar way to standard MAVLink messages).</p><h2 id="file-locationsurls"><a href="#file-locationsurls"class="plugin-anchor"name="file-locationsurls"><i class="fa fa-link"aria-hidden="true"></i></a>File Locations/URLs</h2><p><a href="#COMP_METADATA_TYPE_GENERAL">General metadata</a> files and <a href="#COMP_METADATA_TYPE_PERIPHERALS">peripherals metadata</a> files (if supported) <em>must</em> be stored on the device, and will usually be <a href="#file-compression"><strong>.xz</strong> compressed</a>. The location of these files is returned in the <a href="#COMPONENT_INFORMATION">COMPONENT_INFORMATION</a> <code>general_metadata_uri</code> and <code>peripherals_metadata_uri</code> fields, respectively.</p><p>Other component information files may be hosted on either the device or on the internet.</p><blockquote class="alert clearfix alert-info"><strong class="fa fa-2x fa-edit"></strong><p>Where permitted by memory constraints you should host component information on the device (so that it is always available and cannot get out of sync).</p></blockquote><p>Files on the device are downloaded using <a href="ftp.html">MAVLink FTP</a>. The URI format is defined in <a href="ftp.html#mavlink-ftp-url-scheme">MAVLink FTP URL Scheme</a>. A typical parameter metadata URI might look like this: <code>mftp:///component_information/parameters.json.xz</code>.</p><p>Files on the Internet are downloaded using HTTPS or HTTP via a normal web URL (e.g. <code>https://some_domain/component_information/parameters.json</code>).</p><h2 id="metadata-caching-crc"><a href="#metadata-caching-crc"class="plugin-anchor"name="metadata-caching-crc"><i class="fa fa-link"aria-hidden="true"></i></a>Metadata Caching (CRC)</h2><p>The <a href="#COMPONENT_INFORMATION">COMPONENT_INFORMATION</a> message includes <code>general_metadata_file_crc</code> and <code>peripherals_metadata_file_crc</code> fields, which contain <a href="../crc.md#crc32-algorithm">CRC32</a> values calculated for the files referenced in fields <code>general_metadata_uri</code> and <code>peripherals_metadata_uri</code> (respectively). A ground station should cache downloaded component metadata and only update it if the CRC value changes.</p><p>The <a href="#COMP_METADATA_TYPE_GENERAL">general metadata file</a> similarly provides both file locations and <a href="../crc.md#crc32-algorithm">CRC32</a> values for other metadata supported by a component.</p><h2 id="file-compression"><a href="#file-compression"class="plugin-anchor"name="file-compression"><i class="fa fa-link"aria-hidden="true"></i></a>File Compression</h2><p>Component information files may be <strong>.xz</strong> compressed (this is recommended for files that are hosted on the device).</p><blockquote class="alert clearfix alert-info"><strong class="fa fa-2x fa-edit"></strong><p>The prototype implementation generates and compresses component information files at build time. No compression library is required within the flight stack itself.</p></blockquote><p><span></span></p><blockquote class="alert clearfix alert-warning"><strong class="fa fa-2x fa-exclamation-triangle"></strong><p>Systems that <em>request</em> component information <strong>must</strong> support extraction of <strong>.xz</strong>-compressed JSON files.</p></blockquote><p><span></span></p><blockquote class="alert clearfix alert-success"><strong class="fa fa-2x fa-thumbs-o-up"></strong><p>The <a href="https://tukaani.org/xz/embedded.html"target="_blank">Tukaani Project XZ Embedded</a> library is an easy-to-use XZ compression library for embedded systems.</p></blockquote><h2 id="sequences"><a href="#sequences"class="plugin-anchor"name="sequences"><i class="fa fa-link"aria-hidden="true"></i></a>Sequences</h2><h3 id="component-discovery"><a href="#component-discovery"class="plugin-anchor"name="component-discovery"><i class="fa fa-link"aria-hidden="true"></i></a>Component Discovery</h3><p>A GCS can <em>broadcast</em> the <code>MAV_CMD_REQUEST_MESSAGE</code> specifying <code>param1=395</code>; all components that support the protocol should respond with <code>COMPONENT_INFORMATION</code>.</p><p>A GCS can further discover all components in the system by monitoring the channel for <code>HEARTBEAT</code> ids, and then send the request to each of them to <a href="#check-protocol-is-supported">verify whether the protocol is supported</a>. The broadcast approach is recommended for GCSes that don&apos;t track all components on the link.</p><h3 id="check-protocol-is-supported"><a href="#check-protocol-is-supported"class="plugin-anchor"name="check-protocol-is-supported"><i class="fa fa-link"aria-hidden="true"></i></a>Check Protocol is Supported</h3><p>A system can query whether another component supports the protocol by sending the command <a href="../messages/common.html#MAV_CMD_REQUEST_MESSAGE">MAV_CMD_REQUEST_MESSAGE</a> (specifying the <a href="../messages/common.html#COMPONENT_INFORMATION">COMPONENT_INFORMATION</a> message).</p><p>The component will respond with <code>COMPONENT_INFORMATION.general_metadata_uri</code> containing a valid URI if the protocol is supported. If the protocol is not supported the component will ACK that the message with <code>MAV_RESULT_UNSUPPORTED</code>, <code>MAV_RESULT_DENIED</code> or <code>MAV_RESULT_FAILED</code>, or return a <code>null</code> value in <code>general_metadata_uri</code>.</p><blockquote class="alert clearfix alert-info"><strong class="fa fa-2x fa-edit"></strong><p>A component that supports this service must return a general metadata file URI <em>that is hosted on the vehicle</em> (accessed using MAVLink FTP).</p></blockquote><h3 id="get-metadata"><a href="#get-metadata"class="plugin-anchor"name="get-metadata"><i class="fa fa-link"aria-hidden="true"></i></a>Get MetaData</h3><p>The basic sequence is shown below.</p><p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtO1xuICAgIHBhcnRpY2lwYW50IEdDU1xuICAgIHBhcnRpY2lwYW50IENvbXBvbmVudFxuICAgIE5vdGUgb3ZlciBDb21wb25lbnQsIEdDUzogR0NTOiBSZXF1ZXN0IGNvbXBvbmVudCBpbmZvcm1hdGlvbi5cbiAgICBHQ1MtPj5Db21wb25lbnQ6IE1BVl9DTURfUkVRVUVTVF9NRVNTQUdFKHBhcmFtMT0zOTUpXG4gICAgR0NTLS0-PkdDUzogU3RhcnQgQUNLIHJlY2VpdmUgdGltZW91dFxuICAgICAgQ29tcG9uZW50LT4-R0NTOiBDTURfQUNLXG4gICAgICBDb21wb25lbnQtPj5HQ1M6IENPTVBPTkVOVF9JTkZPUk1BVElPTiggZ2VuZXJhbF9tZXRhZGF0YV91cmksIC4uLilcbiAgICBOb3RlIG92ZXIgQ29tcG9uZW50LCBHQ1M6IEdDUyBjaGVjayBpZiBnZW5lcmFsIG1ldGFkYXRhIGhhcyBjaGFuZ2VkICh1c2luZyBzdXBwbGllZCBDUkMpLiBcbiAgICBOb3RlIG92ZXIgQ29tcG9uZW50LCBHQ1M6IEdDUyBkb3dubG9hZCBnZW5lcmFsIG1ldGFkYXRhIGZpbGUgdXNpbmcgTUFWRlRQIGFuZCBwYXJzZS4gXG4gICAgTm90ZSBvdmVyIENvbXBvbmVudCwgR0NTOiBHQ1MgZG93bmxvYWQgb3RoZXIgbWV0YWRhdGEgdHlwZXMgcmVmZXJlbmNlZCBpbiBnZW5lcmFsIG1ldGFkYXRhPGJyPiAoZnJvbSBkZXZpY2Ugb3IgSW50ZXJuZXQpLiBcbiAgICAgIFxuICAgIiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifSwidXBkYXRlRWRpdG9yIjpmYWxzZX0"target="_blank"><img alt=""src="https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtO1xuICAgIHBhcnRpY2lwYW50IEdDU1xuICAgIHBhcnRpY2lwYW50IENvbXBvbmVudFxuICAgIE5vdGUgb3ZlciBDb21wb25lbnQsIEdDUzogR0NTOiBSZXF1ZXN0IGNvbXBvbmVudCBpbmZvcm1hdGlvbi5cbiAgICBHQ1MtPj5Db21wb25lbnQ6IE1BVl9DTURfUkVRVUVTVF9NRVNTQUdFKHBhcmFtMT0zOTUpXG4gICAgR0NTLS0-PkdDUzogU3RhcnQgQUNLIHJlY2VpdmUgdGltZW91dFxuICAgICAgQ29tcG9uZW50LT4-R0NTOiBDTURfQUNLXG4gICAgICBDb21wb25lbnQtPj5HQ1M6IENPTVBPTkVOVF9JTkZPUk1BVElPTiggZ2VuZXJhbF9tZXRhZGF0YV91cmksIC4uLilcbiAgICBOb3RlIG92ZXIgQ29tcG9uZW50LCBHQ1M6IEdDUyBjaGVjayBpZiBnZW5lcmFsIG1ldGFkYXRhIGhhcyBjaGFuZ2VkICh1c2luZyBzdXBwbGllZCBDUkMpLiBcbiAgICBOb3RlIG92ZXIgQ29tcG9uZW50LCBHQ1M6IEdDUyBkb3dubG9hZCBnZW5lcmFsIG1ldGFkYXRhIGZpbGUgdXNpbmcgTUFWRlRQIGFuZCBwYXJzZS4gXG4gICAgTm90ZSBvdmVyIENvbXBvbmVudCwgR0NTOiBHQ1MgZG93bmxvYWQgb3RoZXIgbWV0YWRhdGEgdHlwZXMgcmVmZXJlbmNlZCBpbiBnZW5lcmFsIG1ldGFkYXRhPGJyPiAoZnJvbSBkZXZpY2Ugb3IgSW50ZXJuZXQpLiBcbiAgICAgIFxuICAgIiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifSwidXBkYXRlRWRpdG9yIjpmYWxzZX0"></a></p><p>In summary:</p><ol><li>GCS sends <code>MAV_CMD_REQUEST_MESSAGE</code> specifying <code>param1=395</code>.<ul><li>This is a normal <a href="command.html">command protocol</a> request with timeouts and resends based on the ACK.</li></ul></li><li>The component will ACK the command and immediately send the requested <code>COMPONENT_INFORMATION</code> message (populated with URI and CRC for the general metadata file, and optionally with the URI and CRC for the non-MAVLink peripherals metadata file).<ul><li>A <code>CMD_ACK</code> of anything other than <code>MAV_RESULT_ACCEPTED</code> indicates the protocol is not supported (sequence completes).</li></ul></li><li><p>GCS waits for the <code>COMPONENT_INFORMATION</code> message</p><ul><li>If not recieved the GCS should resend the request (typically in the application level).</li><li><p>Once information is received:</p><ul><li>the GCS checks if <code>COMPONENT_INFORMATION.general_metadata_file_crc</code> matches its cached CRC value. If so, there is no need to download the <a href="#COMP_METADATA_TYPE_GENERAL">general metadata file</a> (or other files it references) as it has not changed since the last download.</li><li>the GCS checks if <code>COMPONENT_INFORMATION.peripherals_metadata_uri</code> if supplied, and (if so) whether the <code>peripherals_metadata_file_crc</code> field matches the cached value.</li></ul><p>If the cached values do not match the associated files should be downloaded and parsed ....</p></li></ul></li><li>GCS downloads the file specified in the <code>general_metadata_uri</code> using MAVLink FTP.</li><li>GCS parses the general metadata for other supported metadata locations, and then downloads the files via MAVFTP or HTTP(s). This may be done immediately, or as needed.</li></ol><h2 id="open-issues"><a href="#open-issues"class="plugin-anchor"name="open-issues"><i class="fa fa-link"aria-hidden="true"></i></a>Open Issues</h2><h3 id="translations"><a href="#translations"class="plugin-anchor"name="translations"><i class="fa fa-link"aria-hidden="true"></i></a>Translations</h3><ul><li>A method for setting/updating the translation file has not yet been determined (if hosted on a server, a component never sees the file, which might be changed any time)</li><li>There is no end-to-end prototype of the translation system, so there may still be other issues.</li></ul><h3 id="schema-management"><a href="#schema-management"class="plugin-anchor"name="schema-management"><i class="fa fa-link"aria-hidden="true"></i></a>Schema Management</h3><p>Schema <em>management</em> has not yet been signed off.</p><h3 id="guaranteed-availablility-of-component-information"><a href="#guaranteed-availablility-of-component-information"class="plugin-anchor"name="guaranteed-availablility-of-component-information"><i class="fa fa-link"aria-hidden="true"></i></a>Guaranteed Availablility of Component Information</h3><p>There is a concern that vehicles reliant on internet-hosted component information files may stop working if the hosting ceases.</p><p>This can generally be avoided by hosting the files compressed on-vehicle.</p><p>We propose that manufacturers that use autopilots with limited flash (1MB or below) and do custom firmware development should host the files in github.</p></section></div><div class="search-results"><div class="has-results"><h1 class="search-results-title"><span class="search-results-count"></span> results matching "<span class="search-query"></span>"</h1><ul class="search-results-list"></ul></div><div class="no-results"><h1 class="search-results-title">No results matching "<span class="search-query"></span>"</h1></div></div></div></div></div></div></div><script>var gitbook=gitbook||[];gitbook.push(function(){gitbook.page.hasChanged({page:{title:"Component Information Protocol (WIP)",level:"1.6.19",depth:2,next:{title:"Contributing",level:"1.7",depth:1,path:"contributing/contributing.md",ref:"contributing/contributing.md",articles:[]},previous:{title:"High Latency Protocol",level:"1.6.18",depth:2,path:"services/high_latency.md",ref:"services/high_latency.md",articles:[]},dir:"ltr"},config:{plugins:["theme-api","youtube","anchors","collapsible-menu","page-toc-button","language-picker","custom-favicon","richquotes@git+https://github.com/Dronecode/gitbook-plugin-richquotes.git","bulk-redirect@git+https://github.com/Dronecode/gitbook-plugin-bulk-redirect.git","toolbar@git+https://github.com/hamishwillee/gitbook-plugin-toolbar.git","-mermaid","theme-dronecode@git+https://github.com/dronecode/theme-dronecode.git","html-minifier"],styles:{website:"styles/website.css",pdf:"styles/pdf.css",epub:"styles/epub.css",mobi:"styles/mobi.css",ebook:"styles/ebook.css",print:"styles/print.css"},pluginsConfig:{"theme-dronecode":{logo:{logo_large:"../assets/site/logo_mavlink_header.png",logo_small:"../assets/site/logo_mavlink_header.png",url:"https://mavlink.io/en/"},menu:[{url:"https://mavlink.io/en/messages/common.html",text:"Messages",text_small:"Messages"},{url:"https://mavlink.io/en/about/faq.html",text:"FAQ",text_small:"FAQ"},{url:"https://mavlink.io/en/about/implementations.html",text:"Implementations",text_small:"Implementations"},{url:"https://mavlink.io/en/mavgen_c/examples.html",text:"Examples",text_small:"Examples"},{url:"https://mavlink.io/en/about/support.html",text:"Support",text_small:"Help"}]},"collapsible-menu":{},"language-picker":{"grid-columns":3},youtube:{},search:{},"html-minifier":{customAttrSurround:[],removeScriptTypeAttributes:!1,removeEmptyAttributes:!1,removeRedundantAttributes:!1,removeEmptyElements:!1,sortClassName:!0,caseSensitive:!0,html5:!0,collapseWhitespace:!0,processConditionalComments:!1,quoteCharacter:null,keepClosingSlash:!0,preventAttributesEscaping:!1,minifyURLs:!1,removeAttributeQuotes:!1,decodeEntities:!1,trimCustomFragments:!1,customAttrAssign:[],includeAutoGeneratedTags:!0,collapseInlineTagWhitespace:!1,collapseBooleanAttributes:!0,minifyJS:!0,removeTagWhitespace:!0,preserveLineBreaks:!1,sortAttributes:!0,removeStyleLinkTypeAttributes:!1,removeComments:!0,minifyCSS:!0,processScripts:[],conservativeCollapse:!1,removeOptionalTags:!1,useShortDoctype:!1},lunr:{maxIndexSize:1e6,ignoreSpecialCharacters:!1},fontsettings:{theme:"white",family:"sans",size:2},richquotes:{tip:{alert:"success",picto:"fa-thumbs-o-up"}},highlight:{},favicon:"favicon.ico","page-toc-button":{},"theme-api":{languages:[{lang:"c",name:"C/C++",default:!0},{lang:"python",name:"Python"},{lang:"js",name:"JavaScript"},{lang:"go",name:"Go"}],split:!0,theme:"light"},"bulk-redirect":{basepath:"/",redirectsFile:"redirects.json"},"custom-favicon":{},toolbar:{buttons:[{label:"Bug tracker",icon:"fa fa-bug",position:"left",url:"https://github.com/mavlink/mavlink-devguide/issues/new?title=Doc+Bug:+{{title}}&body=DESCRIBE+PROBLEM+WITH+DOCS+HERE%0A%0ABug+Page:+[{{title}}]({{url}})"},{label:"GitHub",icon:"fa fa-github",url:"https://github.com/mavlink/mavlink-devguide"},{label:"Edit page on github",icon:"fa fa-pencil-square-o",position:"left",url:"https://github.com/mavlink/mavlink-devguide/edit/master/{{filepath_lang}}"}]},sharing:{facebook:!0,twitter:!0,google:!1,weibo:!1,instapaper:!1,vk:!1,all:["facebook","google","twitter","weibo","instapaper"]},"theme-default":{styles:{website:"styles/website.css",pdf:"styles/pdf.css",epub:"styles/epub.css",mobi:"styles/mobi.css",ebook:"styles/ebook.css",print:"styles/print.css"},showLevel:!1},anchors:{}},theme:"default",pdf:{pageNumbers:!0,fontSize:12,fontFamily:"Arial",paperSize:"a4",chapterMark:"pagebreak",pageBreaksBefore:"/",margin:{right:62,left:62,top:56,bottom:56}},structure:{langs:"LANGS.md",readme:"README.md",glossary:"GLOSSARY.md",summary:"SUMMARY.md"},variables:{logo:"./assets/site/logo_mavlink_small.png"},title:"MAVLink Developer Guide",language:"ko",gitbook:"*"},file:{path:"services/component_information.md",mtime:"2021-10-01T06:51:58.742Z",type:"markdown"},gitbook:{version:"3.2.3",time:"2021-10-01T06:52:44.521Z"},basePath:"..",book:{language:"ko"}})})</script></div><script src="../../gitbook/gitbook.js"></script><script src="../../gitbook/theme.js"></script><script src="../../gitbook/gitbook-plugin-collapsible-menu/plugin.js"></script><script src="../../gitbook/gitbook-plugin-page-toc-button/plugin.js"></script><script src="../../gitbook/gitbook-plugin-language-picker/plugin.js"></script><script src="../../gitbook/gitbook-plugin-toolbar/buttons.js"></script><script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script><script src="../../gitbook/gitbook-plugin-search/search.js"></script><script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script><script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script><script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script><script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script><script src="../../gitbook/gitbook-plugin-theme-api/theme-api.js"></script></body></html>